{"pages":[],"posts":[{"title":"Centos8挂载光盘使用本地yum源","text":"利用Centos光盘制作本地yum源 加载并挂载光盘 1234567891011121314151617181920ll /dev | grep sr //查看设备列表中的光盘[root@centos8pc1 mnt]# ll /dev | grep srlrwxrwxrwx. 1 root root 3 10月 8 20:43 cdrom -&gt; sr0 //cdrom软链接指向sr0brw-rw----. 1 root cdrom 11, 0 10月 8 20:43 sr0//可能存在多个光盘，可尝试挂载//切换至/mnt目录下创建文件夹cd /mntmkdir cdrom[root@centos8pc1 mnt]# mount /dev/sr0 /mnt/cdrom/mount: /mnt/cdrom: WARNING: device write-protected, mounted read-only.//该错误可忽略[root@centos8pc1 mnt]# ll /mnt/cdrom/总用量 12dr-xr-xr-x. 4 root root 2048 8月 16 05:52 AppStreamdr-xr-xr-x. 4 root root 2048 8月 16 05:52 BaseOSdr-xr-xr-x. 3 root root 2048 8月 16 05:52 EFIdr-xr-xr-x. 3 root root 2048 8月 16 05:52 imagesdr-xr-xr-x. 2 root root 2048 8月 16 05:52 isolinux-r--r--r--. 1 root root 87 8月 16 05:51 media.repo-r--r--r--. 1 root root 664 8月 16 05:52 TRANS.TBL 持久化挂载1234567891011121314//只读方式持久化挂载光驱[root@centos8pc1 mnt]# echo \"/dev/sr0 /mnt/cdrom iso9660 ro 0 0\" &gt;&gt; /etc/fstab //测试持久化挂载效果[root@centos8pc1 mnt]# umount /mnt/cdrom/[root@centos8pc1 mnt]# mount -a[root@centos8pc1 mnt]# ll /mnt/cdrom/总用量 12dr-xr-xr-x. 4 root root 2048 8月 16 05:52 AppStreamdr-xr-xr-x. 4 root root 2048 8月 16 05:52 BaseOSdr-xr-xr-x. 3 root root 2048 8月 16 05:52 EFIdr-xr-xr-x. 3 root root 2048 8月 16 05:52 imagesdr-xr-xr-x. 2 root root 2048 8月 16 05:52 isolinux-r--r--r--. 1 root root 87 8月 16 05:51 media.repo-r--r--r--. 1 root root 664 8月 16 05:52 TRANS.TBL 配置本地yum源 12345678910111213141516171819202122232425262728293031323334353637//切换至本地源配置模板[root@centos8pc1 mnt]# cd /etc/yum.repos.d/[root@centos8pc1 yum.repos.d]# ll总用量 44-rw-r--r--. 1 root root 731 8月 14 14:42 CentOS-AppStream.repo-rw-r--r--. 1 root root 712 8月 14 14:42 CentOS-Base.repo-rw-r--r--. 1 root root 798 8月 14 14:42 CentOS-centosplus.repo-rw-r--r--. 1 root root 1320 8月 14 14:42 CentOS-CR.repo-rw-r--r--. 1 root root 668 8月 14 14:42 CentOS-Debuginfo.repo-rw-r--r--. 1 root root 756 8月 14 14:42 CentOS-Extras.repo-rw-r--r--. 1 root root 338 8月 14 14:42 CentOS-fasttrack.repo-rw-r--r--. 1 root root 928 8月 14 14:42 CentOS-Media.repo-rw-r--r--. 1 root root 736 8月 14 14:42 CentOS-PowerTools.repo-rw-r--r--. 1 root root 1382 8月 14 14:42 CentOS-Sources.repo-rw-r--r--. 1 root root 74 8月 14 14:42 CentOS-Vault.repo//备份原配置[root@centos8pc1 etc]# tar -cjvf ./yum.repos.d/* &gt; yum.repos.d.tar.bz2//创建新的文件[root@centos8pc1 yum.repos.d]# cp CentOS-Base.repo ./Localhost-Base.repo[root@centos8pc1 yum.repos.d]# cp CentOS-AppStream.repo ./Localhost-AppStream.repo//centos8和7相比yum源的软件分为两类，需要分开配置对应的源//系统基础yum源[BaseOS]name=CentOS-$releasever - Base#mirrorlist=http://mirrorlist.centos.org/？#release=$releasever&amp;arch=$basearch&amp;repo=BaseOS&amp;infra=$infrabaseurl=file:///mnt/cdrom/BaseOSgpgcheck=0enabled=1#gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial//应用源 [AppStream]name=CentOS-$releasever - AppStream#mirrorlist=http://mirrorlist.centos.org/?#release=$releasever&amp;arch=$basearch&amp;repo=BaseOS&amp;infra=$infrabaseurl=file:///mnt/cdrom/AppStreamgpgcheck=0enabled=1#gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial 测试yum源 123456789101112131415161718//删除多余配置[root@centos8pc1 yum.repos.d]# rm CentOS-*.repo -f[root@centos8pc1 yum.repos.d]# ll总用量 12-rw-r--r--. 1 root root 679 10月 8 21:37 Localhost-AppStream.repo-rw-r--r--. 1 root root 668 10月 8 21:36 Localhost-Base.repo-rw-r--r--. 1 root root 337 10月 8 21:25 yum.repos.d.tar.bz2//删除yum元数据缓存[root@centos8pc1 yum.repos.d]# yum clean all6 文件已删除//新建yum元数据缓存[root@centos8pc1 yum.repos.d]# yum makecacheCentOS-8 - AppStream 229 MB/s | 5.2 MB 00:00 CentOS-8 - Base 18 MB/s | 2.2 MB 00:00 上次元数据过期检查：0:00:01 前，执行于 2019年10月08日 星期二 21时41分11秒。元数据缓存已建立。//测试安装vim[root@centos8pc1 yum.repos.d]# yum install vim","link":"/hexo/2019/10/08/Centos8挂载光盘使用本地yum源/"},{"title":"centos8静默安装oracle12c","text":"Centos8静默安装oracle12c准备工作安装Centos8基本环境挂载配置本地yum源，固定ip地址。 配置防火墙1234567firewall-cmd --zone=public --add-port=1521/tcp --permanentfirewall-cmd --zone=public --add-port=5500/tcp --permanentfirewall-cmd --zone=public --add-port=5901/tcp --permanentfirewall-cmd --reloadfirewall-cmd --zone=public --query-port=1521/tcpfirewall-cmd --zone=public --query-port=5500/tcpfirewall-cmd --zone=public --query-port=5901/tcp 设置主机名123hostnamectl set-hostname oracle12c //设置主机名为oracle12cip address show //查看主机ip地址echo \"192.168.37.136 oracle12c\" &gt;&gt; /etc/hosts //设置hosts文件 禁用Transparent Huge123456789101112131415161718192021Centos 8上默认THP是打开的cat /sys/kernel/mm/transparent_hugepage/enabledcat /sys/kernel/mm/transparent_hugepage/defrag 编辑rc.local文件：vi /etc/rc.d/rc.local增加下列内容：if test -f /sys/kernel/mm/transparent_hugepage/enabled; then echo never &gt; /sys/kernel/mm/transparent_hugepage/enabledfiif test -f /sys/kernel/mm/transparent_hugepage/defrag; then echo never &gt; /sys/kernel/mm/transparent_hugepage/defragfi保存退出，然后赋予rc.local文件执行权限：chmod +x /etc/rc.d/rc.local最后重启系统，以后再检查THP应该就是被禁用了cat /sys/kernel/mm/transparent_hugepage/enabledcat /sys/kernel/mm/transparent_hugepage/defrag 创建用户和群组123456789groupadd -g 10000 oinstallgroupadd -g 10001 dbagroupadd -g 10002 opergroupadd -g 10006 backupdbagroupadd -g 10007 dgdbagroupadd -g 10008 kmdbagroupadd -g 10009 racdbauseradd -u 10000 -g oinstall -G dba,oper,backupdba,dgdba,kmdba,racdba oraclepasswd oracle 配置内核参数1234567891011121314151617181920212223242526272829303132333435 # vi /etc/sysctl.conf 追加下面的内容，如果有则删掉原来的fs.aio-max-nr = 1048576fs.file-max = 6815744kernel.shmmni = 4096kernel.sem = 500 64000 500 128net.ipv4.ip_local_port_range = 9000 65500net.core.rmem_default = 262144net.core.rmem_max = 4194304net.core.wmem_default = 262144net.core.wmem_max = 1048576# vi /etc/security/limits.conforacle soft nproc 2047oracle hard nproc 16384oracle soft nofile 1024oracle hard nofile 65536oracle soft stack 10240oracle hard stack 10240oracle soft memlock unlimitedoracle hard memlock unlimited# vi /etc/pam.d/loginsession required pam_limits.so# vi /etc/profileif [ $USER = \"oracle\" ]; then if [ $SHELL = \"/bin/ksh\" ]; then ulimit -p 16384 ulimit -n 65536 else ulimit -u 16384 -n 65536 fi umask 022fi 配置/dev/shm1234# vi /etc/fstab （文件最后追加一行）大小配置为内存大小tmpfs /dev/shm tmpfs defaults,size=3G 0 0# mount -o remount /dev/shm 创建目录并修改权限12345mkdir -p /u01/app/oracle/product/12.2.0/dbhome_1mkdir -p /oradatachown -R oracle:oinstall /u01/chmod -R 775 /u01/chown oracle:oinstall /oradata 修改环境变量1234567891011# su - oracle$ vi .bash_profileexport ORACLE_SID=oracle12cexport ORACLE_BASE=/u01/app/oracleexport ORACLE_HOME=$ORACLE_BASE/product/12.2.0/dbhome_1export LD_LIBRARY_PATH=$ORACLE_HOME/lib:$ORACLE_HOME/lib32export NLS_DATE_FORMAT=\"yyyy-mm-dd HH24:MI:SS\"export NLS_LANG=SIMPLIFIEDCHINESE_CHINA.AL32UTF8export PATH=$PATH:$ORACLE_HOME/bin$ source .bash_profile 安装依赖12配置本地yum源yum install libnsl.x86_64 //安装libnsl依赖 调整静默安装配置​ 安装配置 123# vi /etc/oraInst.locinventory_loc=/u01/app/oracle/oraInventoryinst_group=oinstall 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435###################################################################### Copyright(c) Oracle Corporation 1998,2017. All rights reserved.#### #### Specify values for the variables listed below to customize #### your installation. #### #### Each variable is associated with a comment. The comment #### can help to populate the variables with the appropriate #### values. #### #### IMPORTANT NOTE: This file contains plain text passwords and #### should be secured to have read permission only by oracle user #### or db administrator who owns this installation. #### #######################################################################-------------------------------------------------------------------------------# Do not change the following system generated value. #-------------------------------------------------------------------------------oracle.install.responseFileVersion=/oracle/install/rspfmt_dbinstall_response_schema_v12.2.0ORACLE_HOSTNAME=rainbow#-------------------------------------------------------------------------------# Specify the installation option.# It can be one of the following:# - INSTALL_DB_SWONLY# - INSTALL_DB_AND_CONFIG# - UPGRADE_DB#-------------------------------------------------------------------------------oracle.install.option=INSTALL_DB_SWONLY#-------------------------------------------------------------------------------# Specify the Unix group to be set for the inventory directory. #-------------------------------------------------------------------------------UNIX_GROUP_NAME=oinstall#-------------------------------------------------------------------------------# Specify the location which holds the inventory files.# This is an optional parameter if installing on# Windows based Operating System.#-------------------------------------------------------------------------------INVENTORY_LOCATION=#-------------------------------------------------------------------------------# Specify the complete path of the Oracle Home. #-------------------------------------------------------------------------------ORACLE_HOME=/u01/app/oracle/product/12.2.0/dbhome_1#-------------------------------------------------------------------------------# Specify the complete path of the Oracle Base. #-------------------------------------------------------------------------------ORACLE_BASE=/u01/app/oracle#-------------------------------------------------------------------------------# Specify the installation edition of the component. # # The value should contain only one of these choices. # - EE : Enterprise Edition # - SE2 : Standard Edition 2#-------------------------------------------------------------------------------oracle.install.db.InstallEdition=EE################################################################################ ## PRIVILEGED OPERATING SYSTEM GROUPS ## ------------------------------------------ ## Provide values for the OS groups to which SYSDBA and SYSOPER privileges ## needs to be granted. If the install is being performed as a member of the ## group \"dba\", then that will be used unless specified otherwise below. ## ## The value to be specified for OSDBA and OSOPER group is only for UNIX based ## Operating System. ## #################################################################################------------------------------------------------------------------------------# The OSDBA_GROUP is the OS group which is to be granted SYSDBA privileges.#-------------------------------------------------------------------------------oracle.install.db.OSDBA_GROUP=dba#------------------------------------------------------------------------------# The OSOPER_GROUP is the OS group which is to be granted SYSOPER privileges.# The value to be specified for OSOPER group is optional.#------------------------------------------------------------------------------oracle.install.db.OSOPER_GROUP=oper#------------------------------------------------------------------------------# The OSBACKUPDBA_GROUP is the OS group which is to be granted SYSBACKUP privileges.#------------------------------------------------------------------------------oracle.install.db.OSBACKUPDBA_GROUP=backupdba#------------------------------------------------------------------------------# The OSDGDBA_GROUP is the OS group which is to be granted SYSDG privileges.#------------------------------------------------------------------------------oracle.install.db.OSDGDBA_GROUP=dgdba#------------------------------------------------------------------------------# The OSKMDBA_GROUP is the OS group which is to be granted SYSKM privileges.#------------------------------------------------------------------------------oracle.install.db.OSKMDBA_GROUP=kmdba#------------------------------------------------------------------------------# The OSRACDBA_GROUP is the OS group which is to be granted SYSRAC privileges.#------------------------------------------------------------------------------oracle.install.db.OSRACDBA_GROUP=racdba################################################################################ ## Grid Options ## #################################################################################------------------------------------------------------------------------------# Specify the type of Real Application Cluster Database# # - ADMIN_MANAGED: Admin-Managed# - POLICY_MANAGED: Policy-Managed# # If left unspecified, default will be ADMIN_MANAGED #------------------------------------------------------------------------------oracle.install.db.rac.configurationType=#------------------------------------------------------------------------------# Value is required only if RAC database type is ADMIN_MANAGED# # Specify the cluster node names selected during the installation.# Leaving it blank will result in install on local server only (Single Instance)# # Example : oracle.install.db.CLUSTER_NODES=node1,node2#------------------------------------------------------------------------------oracle.install.db.CLUSTER_NODES=#------------------------------------------------------------------------------# This variable is used to enable or disable RAC One Node install.## - true : Value of RAC One Node service name is used.# - false : Value of RAC One Node service name is not used.## If left blank, it will be assumed to be false.#------------------------------------------------------------------------------oracle.install.db.isRACOneInstall=#------------------------------------------------------------------------------# Value is required only if oracle.install.db.isRACOneInstall is true.# # Specify the name for RAC One Node Service#------------------------------------------------------------------------------oracle.install.db.racOneServiceName=#------------------------------------------------------------------------------# Value is required only if RAC database type is POLICY_MANAGED# # Specify a name for the new Server pool that will be configured# Example : oracle.install.db.rac.serverpoolName=pool1#------------------------------------------------------------------------------oracle.install.db.rac.serverpoolName=#------------------------------------------------------------------------------# Value is required only if RAC database type is POLICY_MANAGED# # Specify a number as cardinality for the new Server pool that will be configured# Example : oracle.install.db.rac.serverpoolCardinality=2#------------------------------------------------------------------------------oracle.install.db.rac.serverpoolCardinality=################################################################################ ## Database Configuration Options ## #################################################################################-------------------------------------------------------------------------------# Specify the type of database to create.# It can be one of the following:# - GENERAL_PURPOSE # - DATA_WAREHOUSE # GENERAL_PURPOSE: A starter database designed for general purpose use or transaction-heavy applications.# DATA_WAREHOUSE : A starter database optimized for data warehousing applications.#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.type=GENERAL_PURPOSE#-------------------------------------------------------------------------------# Specify the Starter Database Global Database Name. #-------------------------------------------------------------------------------oracle.install.db.config.starterdb.globalDBName=oracle12c#-------------------------------------------------------------------------------# Specify the Starter Database SID.#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.SID=oracle12c#-------------------------------------------------------------------------------# Specify whether the database should be configured as a Container database.# The value can be either \"true\" or \"false\". If left blank it will be assumed# to be \"false\".#-------------------------------------------------------------------------------oracle.install.db.ConfigureAsContainerDB=#-------------------------------------------------------------------------------# Specify the Pluggable Database name for the pluggable database in Container Database.#-------------------------------------------------------------------------------oracle.install.db.config.PDBName=#-------------------------------------------------------------------------------# Specify the Starter Database character set.# # One of the following# AL32UTF8, WE8ISO8859P15, WE8MSWIN1252, EE8ISO8859P2,# EE8MSWIN1250, NE8ISO8859P10, NEE8ISO8859P4, BLT8MSWIN1257,# BLT8ISO8859P13, CL8ISO8859P5, CL8MSWIN1251, AR8ISO8859P6,# AR8MSWIN1256, EL8ISO8859P7, EL8MSWIN1253, IW8ISO8859P8,# IW8MSWIN1255, JA16EUC, JA16EUCTILDE, JA16SJIS, JA16SJISTILDE,# KO16MSWIN949, ZHS16GBK, TH8TISASCII, ZHT32EUC, ZHT16MSWIN950,# ZHT16HKSCS, WE8ISO8859P9, TR8MSWIN1254, VN8MSWIN1258#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.characterSet=AL32UTF8#------------------------------------------------------------------------------# This variable should be set to true if Automatic Memory Management # in Database is desired.# If Automatic Memory Management is not desired, and memory allocation# is to be done manually, then set it to false.#------------------------------------------------------------------------------oracle.install.db.config.starterdb.memoryOption=#-------------------------------------------------------------------------------# Specify the total memory allocation for the database. Value(in MB) should be# at least 256 MB, and should not exceed the total physical memory available # on the system.# Example: oracle.install.db.config.starterdb.memoryLimit=512#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.memoryLimit=#-------------------------------------------------------------------------------# This variable controls whether to load Example Schemas onto# the starter database or not.# The value can be either \"true\" or \"false\". If left blank it will be assumed# to be \"false\".#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.installExampleSchemas=################################################################################ ## Passwords can be supplied for the following four schemas in the ## starter database: ## SYS ## SYSTEM ## DBSNMP (used by Enterprise Manager) ## ## Same password can be used for all accounts (not recommended) ## or different passwords for each account can be provided (recommended) ## #################################################################################------------------------------------------------------------------------------# This variable holds the password that is to be used for all schemas in the# starter database.#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.password.ALL=root#-------------------------------------------------------------------------------# Specify the SYS password for the starter database.#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.password.SYS=#-------------------------------------------------------------------------------# Specify the SYSTEM password for the starter database.#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.password.SYSTEM=#-------------------------------------------------------------------------------# Specify the DBSNMP password for the starter database.# Applicable only when oracle.install.db.config.starterdb.managementOption=CLOUD_CONTROL#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.password.DBSNMP=#-------------------------------------------------------------------------------# Specify the PDBADMIN password required for creation of Pluggable Database in the Container Database.#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.password.PDBADMIN=#-------------------------------------------------------------------------------# Specify the management option to use for managing the database.# Options are:# 1. CLOUD_CONTROL - If you want to manage your database with Enterprise Manager Cloud Control along with Database Express.# 2. DEFAULT -If you want to manage your database using the default Database Express option.#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.managementOption=#-------------------------------------------------------------------------------# Specify the OMS host to connect to Cloud Control.# Applicable only when oracle.install.db.config.starterdb.managementOption=CLOUD_CONTROL#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.omsHost=#-------------------------------------------------------------------------------# Specify the OMS port to connect to Cloud Control.# Applicable only when oracle.install.db.config.starterdb.managementOption=CLOUD_CONTROL#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.omsPort=#-------------------------------------------------------------------------------# Specify the EM Admin user name to use to connect to Cloud Control.# Applicable only when oracle.install.db.config.starterdb.managementOption=CLOUD_CONTROL#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.emAdminUser=#-------------------------------------------------------------------------------# Specify the EM Admin password to use to connect to Cloud Control.# Applicable only when oracle.install.db.config.starterdb.managementOption=CLOUD_CONTROL#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.emAdminPassword=################################################################################ ## SPECIFY RECOVERY OPTIONS ## ------------------------------------ ## Recovery options for the database can be mentioned using the entries below ## #################################################################################------------------------------------------------------------------------------# This variable is to be set to false if database recovery is not required. Else # this can be set to true.#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.enableRecovery=#-------------------------------------------------------------------------------# Specify the type of storage to use for the database.# It can be one of the following:# - FILE_SYSTEM_STORAGE# - ASM_STORAGE#-------------------------------------------------------------------------------oracle.install.db.config.starterdb.storageType=#-------------------------------------------------------------------------------# Specify the database file location which is a directory for datafiles, control# files, redo logs. ## Applicable only when oracle.install.db.config.starterdb.storage=FILE_SYSTEM_STORAGE #-------------------------------------------------------------------------------oracle.install.db.config.starterdb.fileSystemStorage.dataLocation=#-------------------------------------------------------------------------------# Specify the recovery location.## Applicable only when oracle.install.db.config.starterdb.storage=FILE_SYSTEM_STORAGE #-------------------------------------------------------------------------------oracle.install.db.config.starterdb.fileSystemStorage.recoveryLocation=#-------------------------------------------------------------------------------# Specify the existing ASM disk groups to be used for storage.## Applicable only when oracle.install.db.config.starterdb.storageType=ASM_STORAGE#-------------------------------------------------------------------------------oracle.install.db.config.asm.diskGroup=#-------------------------------------------------------------------------------# Specify the password for ASMSNMP user of the ASM instance. ## Applicable only when oracle.install.db.config.starterdb.storage=ASM_STORAGE #-------------------------------------------------------------------------------oracle.install.db.config.asm.ASMSNMPPassword=#------------------------------------------------------------------------------# Specify the My Oracle Support Account Username.## Example : MYORACLESUPPORT_USERNAME=abc@oracle.com#------------------------------------------------------------------------------MYORACLESUPPORT_USERNAME=#------------------------------------------------------------------------------# Specify the My Oracle Support Account Username password.## Example : MYORACLESUPPORT_PASSWORD=password#------------------------------------------------------------------------------MYORACLESUPPORT_PASSWORD=#------------------------------------------------------------------------------# Specify whether to enable the user to set the password for# My Oracle Support credentials. The value can be either true or false.# If left blank it will be assumed to be false.## Example : SECURITY_UPDATES_VIA_MYORACLESUPPORT=true#------------------------------------------------------------------------------SECURITY_UPDATES_VIA_MYORACLESUPPORT=false#------------------------------------------------------------------------------# Specify whether user doesn't want to configure Security Updates.# The value for this variable should be true if you don't want to configure# Security Updates, false otherwise.## The value can be either true or false. If left blank it will be assumed# to be true.## Example : DECLINE_SECURITY_UPDATES=false#------------------------------------------------------------------------------DECLINE_SECURITY_UPDATES=true#------------------------------------------------------------------------------# Specify the Proxy server name. Length should be greater than zero.## Example : PROXY_HOST=proxy.domain.com #------------------------------------------------------------------------------PROXY_HOST=#------------------------------------------------------------------------------# Specify the proxy port number. Should be Numeric and at least 2 chars.## Example : PROXY_PORT=25#------------------------------------------------------------------------------PROXY_PORT=#------------------------------------------------------------------------------# Specify the proxy user name. Leave PROXY_USER and PROXY_PWD# blank if your proxy server requires no authentication.## Example : PROXY_USER=username#------------------------------------------------------------------------------PROXY_USER=#------------------------------------------------------------------------------# Specify the proxy password. Leave PROXY_USER and PROXY_PWD # blank if your proxy server requires no authentication.## Example : PROXY_PWD=password#------------------------------------------------------------------------------PROXY_PWD=#------------------------------------------------------------------------------# Specify the Oracle Support Hub URL. # # Example : COLLECTOR_SUPPORTHUB_URL=https://orasupporthub.company.com:8080/#------------------------------------------------------------------------------COLLECTOR_SUPPORTHUB_URL= 12345678910111213141516171819202122232425262728293031执行$ /home/oracle/database/runInstaller -silent -responseFile /home/oracle/database/response/db_install.rsp Starting Oracle Universal Installer...Preparing to launch Oracle Universal Installer from /tmp/OraInstall2019-11-26_12-40-01PM. Please wait ... ACTION: Refer to My Oracle Support portal for the latest certification information for this operating system. Proceed with the installation if the operating system has been certified after the release of this software.[WARNING] [INS-08109] Unexpected error occurred while validating inputs at state 'inventoryPage'. CAUSE: No additional information available. ACTION: Contact Oracle Support Services or refer to the software manual. SUMMARY: - java.lang.NullPointerExceptionA log of this session is currently saved as: /tmp/OraInstall2019-11-26_12-40-01PM/installActions2019-11-26_12-40-01PM.log. Oracle recommends that if you want to keep this log, you should move it from the temporary location.[oracle@oracle12c database]$ /home/oracle/database/runInstaller -silent -responseFile /home/oracle/database/response/db_install.rsp Starting Oracle Universal Installer...Checking Temp space: must be greater than 500 MB. Actual 46411 MB PassedChecking swap space: must be greater than 150 MB. Actual 6099 MB PassedPreparing to launch Oracle Universal Installer from /tmp/OraInstall2019-11-26_12-48-42PM. Please wait ...[oracle@oracle12c database]$ [WARNING] [INS-13001] Oracle Database is not supported on this operating system. Installer will not perform prerequisite checks on the system. CAUSE: This operating system may not have been in the certified list at the time of the release of this software. ACTION: Refer to My Oracle Support portal for the latest certification information for this operating system. Proceed with the installation if the operating system has been certified after the release of this software.[WARNING] [INS-32056] The specified Oracle Base contains the existing Central Inventory for more details.As a root user, execute the following script(s): 1. /u01/app/oracle/product/12.2.0/dbhome_1/root.shSuccessfully Setup Software. 静默创建数据库实例编辑配置文件# vim dbca.rsp 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604################################################################################ #### DBCA response file #### ------------------ #### Copyright(c) Oracle Corporation 1998,2017. All rights reserved. #### #### Specify values for the variables listed below to customize #### your installation. #### #### Each variable is associated with a comment. The comment #### can help to populate the variables with the appropriate #### values. #### #### IMPORTANT NOTE: This file contains plain text passwords and #### should be secured to have read permission only by oracle user #### or db administrator who owns this installation. #################################################################################-------------------------------------------------------------------------------# Do not change the following system generated value. #-------------------------------------------------------------------------------responseFileVersion=/oracle/assistants/rspfmt_dbca_response_schema_v12.2.0#-----------------------------------------------------------------------------# Name : gdbName# Datatype : String# Description : Global database name of the database# Valid values : &lt;db_name&gt;.&lt;db_domain&gt; - when database domain isn't NULL# &lt;db_name&gt; - when database domain is NULL# Default value : None# Mandatory : Yes#-----------------------------------------------------------------------------gdbName=ora12c#-----------------------------------------------------------------------------# Name : sid# Datatype : String# Description : System identifier (SID) of the database# Valid values : Check Oracle12c Administrator's Guide# Default value : &lt;db_name&gt; specified in GDBNAME# Mandatory : No#-----------------------------------------------------------------------------sid=ora12c#-----------------------------------------------------------------------------# Name : databaseConfigType# Datatype : String# Description : database conf type as Single Instance, Real Application Cluster or Real Application Cluster One Nodes database# Valid values : SI\\RAC\\RACONENODE# Default value : SI# Mandatory : No#-----------------------------------------------------------------------------databaseConfigType=#-----------------------------------------------------------------------------# Name : RACOneNodeServiceName# Datatype : String# Description : Service is required by application to connect to RAC One # Node Database# Valid values : Service Name# Default value : None# Mandatory : No [required in case DATABASECONFTYPE is set to RACONENODE ]#-----------------------------------------------------------------------------RACOneNodeServiceName=#-----------------------------------------------------------------------------# Name : policyManaged# Datatype : Boolean# Description : Set to true if Database is policy managed and # set to false if Database is admin managed# Valid values : TRUE\\FALSE# Default value : FALSE# Mandatory : No#-----------------------------------------------------------------------------policyManaged=#-----------------------------------------------------------------------------# Name : createServerPool# Datatype : Boolean# Description : Set to true if new server pool need to be created for database # if this option is specified then the newly created database # will use this newly created serverpool. # Multiple serverpoolname can not be specified for database# Valid values : TRUE\\FALSE# Default value : FALSE# Mandatory : No#-----------------------------------------------------------------------------createServerPool=#-----------------------------------------------------------------------------# Name : serverPoolName# Datatype : String# Description : Only one serverpool name need to be specified # if Create Server Pool option is specified. # Comma-separated list of Serverpool names if db need to use# multiple Server pool# Valid values : ServerPool name# Default value : None# Mandatory : No [required in case of RAC service centric database]#-----------------------------------------------------------------------------serverPoolName=#-----------------------------------------------------------------------------# Name : cardinality# Datatype : Number# Description : Specify Cardinality for create server pool operation# Valid values : any positive Integer value# Default value : Number of qualified nodes on cluster# Mandatory : No [Required when a new serverpool need to be created]#-----------------------------------------------------------------------------cardinality=#-----------------------------------------------------------------------------# Name : force# Datatype : Boolean# Description : Set to true if new server pool need to be created by force # if this option is specified then the newly created serverpool# will be assigned server even if no free servers are available.# This may affect already running database.# This flag can be specified for Admin managed as well as policy managed db.# Valid values : TRUE\\FALSE# Default value : FALSE# Mandatory : No#-----------------------------------------------------------------------------force=#-----------------------------------------------------------------------------# Name : pqPoolName# Datatype : String# Description : Only one serverpool name needs to be specified # if create server pool option is specified. # Comma-separated list of serverpool names if use# server pool. This is required to # create Parallel Query (PQ) database. Applicable to Big Cluster# Valid values : Parallel Query (PQ) pool name# Default value : None# Mandatory : No [required in case of RAC service centric database]#-----------------------------------------------------------------------------pqPoolName=#-----------------------------------------------------------------------------# Name : pqCardinality# Datatype : Number# Description : Specify Cardinality for create server pool operation.# Applicable to Big Cluster # Valid values : any positive Integer value# Default value : Number of qualified nodes on cluster# Mandatory : No [Required when a new serverpool need to be created]#-----------------------------------------------------------------------------pqCardinality=#-----------------------------------------------------------------------------# Name : createAsContainerDatabase # Datatype : boolean# Description : flag to create database as container database # Valid values : Check Oracle12c Administrator's Guide# Default value : false# Mandatory : No#-----------------------------------------------------------------------------createAsContainerDatabase=#-----------------------------------------------------------------------------# Name : numberOfPDBs# Datatype : Number# Description : Specify the number of pdb to be created# Valid values : 0 to 4094# Default value : 0# Mandatory : No#-----------------------------------------------------------------------------numberOfPDBs=#-----------------------------------------------------------------------------# Name : pdbName # Datatype : String# Description : Specify the pdbname/pdbanme prefix if one or more pdb need to be created# Valid values : Check Oracle12c Administrator's Guide# Default value : None# Mandatory : No#-----------------------------------------------------------------------------pdbName=#-----------------------------------------------------------------------------# Name : useLocalUndoForPDBs # Datatype : boolean# Description : Flag to create local undo tablespace for all PDB's.# Valid values : TRUE\\FALSE# Default value : TRUE# Mandatory : No#-----------------------------------------------------------------------------useLocalUndoForPDBs=#-----------------------------------------------------------------------------# Name : pdbAdminPassword# Datatype : String# Description : PDB Administrator user password# Valid values : Check Oracle12c Administrator's Guide# Default value : None# Mandatory : No#-----------------------------------------------------------------------------pdbAdminPassword=#-----------------------------------------------------------------------------# Name : nodelist# Datatype : String# Description : Comma-separated list of cluster nodes# Valid values : Cluster node names# Default value : None# Mandatory : No (Yes for RAC database-centric database )#-----------------------------------------------------------------------------nodelist=#-----------------------------------------------------------------------------# Name : templateName# Datatype : String# Description : Name of the template# Valid values : Template file name# Default value : None# Mandatory : Yes#-----------------------------------------------------------------------------templateName=General_Purpose.dbc#-----------------------------------------------------------------------------# Name : sysPassword# Datatype : String# Description : Password for SYS user# Valid values : Check Oracle12c Administrator's Guide# Default value : None# Mandatory : Yes#-----------------------------------------------------------------------------sysPassword=root#-----------------------------------------------------------------------------# Name : systemPassword# Datatype : String# Description : Password for SYSTEM user# Valid values : Check Oracle12c Administrator's Guide# Default value : None# Mandatory : Yes#-----------------------------------------------------------------------------systemPassword=root#-----------------------------------------------------------------------------# Name : oracleHomeUserPassword# Datatype : String# Description : Password for Windows Service user# Default value : None# Mandatory : If Oracle home is installed with windows service user#-----------------------------------------------------------------------------oracleHomeUserPassword=#-----------------------------------------------------------------------------# Name : emConfiguration# Datatype : String# Description : Enterprise Manager Configuration Type# Valid values : CENTRAL|DBEXPRESS|BOTH|NONE# Default value : NONE# Mandatory : No#-----------------------------------------------------------------------------emConfiguration=#-----------------------------------------------------------------------------# Name : emExpressPort# Datatype : Number# Description : Enterprise Manager Configuration Type# Valid values : Check Oracle12c Administrator's Guide# Default value : NONE# Mandatory : No, will be picked up from DBEXPRESS_HTTPS_PORT env variable# or auto generates a free port between 5500 and 5599#-----------------------------------------------------------------------------emExpressPort=5500#-----------------------------------------------------------------------------# Name : runCVUChecks# Datatype : Boolean# Description : Specify whether to run Cluster Verification Utility checks# periodically in Cluster environment# Valid values : TRUE\\FALSE# Default value : FALSE# Mandatory : No#-----------------------------------------------------------------------------runCVUChecks=#-----------------------------------------------------------------------------# Name : dbsnmpPassword# Datatype : String# Description : Password for DBSNMP user# Valid values : Check Oracle12c Administrator's Guide# Default value : None# Mandatory : Yes, if emConfiguration is specified or# the value of runCVUChecks is TRUE#-----------------------------------------------------------------------------dbsnmpPassword=#-----------------------------------------------------------------------------# Name : omsHost# Datatype : String# Description : EM management server host name# Default value : None# Mandatory : Yes, if CENTRAL is specified for emConfiguration#-----------------------------------------------------------------------------omsHost=#-----------------------------------------------------------------------------# Name : omsPort# Datatype : Number# Description : EM management server port number# Default value : None# Mandatory : Yes, if CENTRAL is specified for emConfiguration#-----------------------------------------------------------------------------omsPort=#-----------------------------------------------------------------------------# Name : emUser# Datatype : String# Description : EM Admin username to add or modify targets# Default value : None# Mandatory : Yes, if CENTRAL is specified for emConfiguration#-----------------------------------------------------------------------------emUser=#-----------------------------------------------------------------------------# Name : emPassword# Datatype : String# Description : EM Admin user password# Default value : None# Mandatory : Yes, if CENTRAL is specified for emConfiguration#-----------------------------------------------------------------------------emPassword=#-----------------------------------------------------------------------------# Name : dvConfiguration# Datatype : Boolean# Description : Specify \"True\" to configure and enable Oracle Database vault# Valid values : True/False# Default value : False# Mandatory : No#-----------------------------------------------------------------------------dvConfiguration=#-----------------------------------------------------------------------------# Name : dvUserName# Datatype : String# Description : DataVault Owner# Valid values : Check Oracle12c Administrator's Guide# Default value : None# Mandatory : Yes, if DataVault option is chosen#-----------------------------------------------------------------------------dvUserName=#-----------------------------------------------------------------------------# Name : dvUserPassword# Datatype : String# Description : Password for DataVault Owner# Valid values : Check Oracle12c Administrator's Guide# Default value : None# Mandatory : Yes, if DataVault option is chosen#-----------------------------------------------------------------------------dvUserPassword=#-----------------------------------------------------------------------------# Name : dvAccountManagerName# Datatype : String# Description : DataVault Account Manager# Valid values : Check Oracle12c Administrator's Guide# Default value : None# Mandatory : No#-----------------------------------------------------------------------------dvAccountManagerName=#-----------------------------------------------------------------------------# Name : dvAccountManagerPassword# Datatype : String# Description : Password for DataVault Account Manager# Valid values : Check Oracle12c Administrator's Guide# Default value : None# Mandatory : No#-----------------------------------------------------------------------------dvAccountManagerPassword=#-----------------------------------------------------------------------------# Name : olsConfiguration# Datatype : Boolean# Description : Specify \"True\" to configure and enable Oracle Label Security# Valid values : True/False# Default value : False# Mandatory : No#-----------------------------------------------------------------------------olsConfiguration=#-----------------------------------------------------------------------------# Name : datafileJarLocation # Datatype : String# Description : Location of the data file jar # Valid values : Directory containing compressed datafile jar# Default value : None# Mandatory : No#-----------------------------------------------------------------------------datafileJarLocation=#-----------------------------------------------------------------------------# Name : datafileDestination # Datatype : String# Description : Location of the data file's# Valid values : Directory for all the database files# Default value : $ORACLE_BASE/oradata# Mandatory : No#-----------------------------------------------------------------------------datafileDestination=#-----------------------------------------------------------------------------# Name : recoveryAreaDestination# Datatype : String# Description : Location of the data file's# Valid values : Recovery Area location# Default value : $ORACLE_BASE/flash_recovery_area# Mandatory : No#-----------------------------------------------------------------------------recoveryAreaDestination=#-----------------------------------------------------------------------------# Name : storageType# Datatype : String# Description : Specifies the storage on which the database is to be created# Valid values : FS (CFS for RAC), ASM# Default value : FS# Mandatory : No#-----------------------------------------------------------------------------storageType=#-----------------------------------------------------------------------------# Name : diskGroupName# Datatype : String# Description : Specifies the disk group name for the storage# Default value : DATA# Mandatory : No#-----------------------------------------------------------------------------diskGroupName=#-----------------------------------------------------------------------------# Name : asmsnmpPassword# Datatype : String# Description : Password for ASM Monitoring# Default value : None# Mandatory : No#-----------------------------------------------------------------------------asmsnmpPassword=#-----------------------------------------------------------------------------# Name : recoveryGroupName# Datatype : String# Description : Specifies the disk group name for the recovery area# Default value : RECOVERY# Mandatory : No#-----------------------------------------------------------------------------recoveryGroupName=#-----------------------------------------------------------------------------# Name : characterSet# Datatype : String# Description : Character set of the database# Valid values : Check Oracle12c National Language Support Guide# Default value : \"US7ASCII\"# Mandatory : NO#-----------------------------------------------------------------------------characterSet=AL32UTF8#-----------------------------------------------------------------------------# Name : nationalCharacterSet# Datatype : String# Description : National Character set of the database# Valid values : \"UTF8\" or \"AL16UTF16\". For details, check Oracle12c National Language Support Guide# Default value : \"AL16UTF16\"# Mandatory : No#-----------------------------------------------------------------------------nationalCharacterSet=#-----------------------------------------------------------------------------# Name : registerWithDirService# Datatype : Boolean# Description : Specifies whether to register with Directory Service.# Valid values : TRUE \\ FALSE# Default value : FALSE# Mandatory : No#-----------------------------------------------------------------------------registerWithDirService=#-----------------------------------------------------------------------------# Name : dirServiceUserName# Datatype : String# Description : Specifies the name of the directory service user# Mandatory : YES, if the value of registerWithDirService is TRUE#-----------------------------------------------------------------------------dirServiceUserName=#-----------------------------------------------------------------------------# Name : dirServicePassword# Datatype : String# Description : The password of the directory service user.# You can also specify the password at the command prompt instead of here.# Mandatory : YES, if the value of registerWithDirService is TRUE#-----------------------------------------------------------------------------dirServicePassword=#-----------------------------------------------------------------------------# Name : walletPassword# Datatype : String# Description : The password for wallet to created or modified.# You can also specify the password at the command prompt instead of here.# Mandatory : YES, if the value of registerWithDirService is TRUE#-----------------------------------------------------------------------------walletPassword=#-----------------------------------------------------------------------------# Name : listeners# Datatype : String# Description : Specifies list of listeners to register the database with.# By default the database is configured for all the listeners specified in the # $ORACLE_HOME/network/admin/listener.ora # Valid values : The list should be comma separated like \"listener1,listener2\".# Mandatory : NO#-----------------------------------------------------------------------------listeners=#-----------------------------------------------------------------------------# Name : variablesFile # Datatype : String# Description : Location of the file containing variable value pair# Valid values : A valid file-system file. The variable value pair format in this file # is &lt;variable&gt;=&lt;value&gt;. Each pair should be in a new line.# Default value : None# Mandatory : NO#-----------------------------------------------------------------------------variablesFile=#-----------------------------------------------------------------------------# Name : variables# Datatype : String# Description : comma separated list of name=value pairs. Overrides variables defined in variablefile and templates# Default value : None# Mandatory : NO#-----------------------------------------------------------------------------variables=#-----------------------------------------------------------------------------# Name : initParams# Datatype : String# Description : comma separated list of name=value pairs. Overrides initialization parameters defined in templates# Default value : None# Mandatory : NO#-----------------------------------------------------------------------------initParams=#-----------------------------------------------------------------------------# Name : sampleSchema# Datatype : Boolean# Description : Specifies whether or not to add the Sample Schemas to your database# Valid values : TRUE \\ FALSE# Default value : FASLE# Mandatory : No#-----------------------------------------------------------------------------sampleSchema=#-----------------------------------------------------------------------------# Name : memoryPercentage# Datatype : String# Description : percentage of physical memory for Oracle# Default value : None# Mandatory : NO#-----------------------------------------------------------------------------memoryPercentage=#-----------------------------------------------------------------------------# Name : databaseType# Datatype : String# Description : used for memory distribution when memoryPercentage specified# Valid values : MULTIPURPOSE|DATA_WAREHOUSING|OLTP# Default value : MULTIPURPOSE# Mandatory : NO#-----------------------------------------------------------------------------databaseType=#-----------------------------------------------------------------------------# Name : automaticMemoryManagement# Datatype : Boolean# Description : flag to indicate Automatic Memory Management is used# Valid values : TRUE/FALSE# Default value : TRUE# Mandatory : NO#-----------------------------------------------------------------------------automaticMemoryManagement=#-----------------------------------------------------------------------------# Name : totalMemory# Datatype : String# Description : total memory in MB to allocate to Oracle# Valid values : # Default value : # Mandatory : NO#-----------------------------------------------------------------------------totalMemory= 12安装命令/u01/app/oracle/product/12.2.0/dbhome_1/bin/dbca -createDatabase -silent -responseFile /home/oracle/database/response/dbca.rsp","link":"/hexo/2019/11/26/centos8静默安装oracle12c/"},{"title":"Hello World","text":"失败的可以使用yarn代替npm","link":"/hexo/2019/09/29/hello-world/"},{"title":"mysql基础","text":"mysql基本操作 创建数据库123create database test ; -- 默认方式创建数据库create database test character set utf8; -- 指定字符集创建数据库 用户管理用户管理对应mysql.user表，修改对应数据库即可 1234567891011121314151617-- 新增用户GRANT ALL PRIVILEGES on test.* to test@localhost IDENTIFIED by &apos;test&apos;;-- 查看用户权限SHOW GRANTS FOR test@localhost;-- 增加用户权限GRANT INSERT on test.* to test@localhost;-- 减少用户权限REVOKE INSERT on sdgx.* from test@localhost;-- 删除用户DELETE FROM user WHERE user=&apos;test&apos; AND WHERE host=&apos;localhost&apos;;-- 忘记mysql root账户密码（linux）systemctl stop mysql -- 关闭mysqlmysqld --skip-grant-tables -- 跳过校验-- 修改密码pkill mysqld -- 杀掉进程systemctl restart mysql -- 重启mysql 范式 1-NF 第一范式表中所有字段都是不可分割的原子集。(比如：地址可以拆分为省、市、县，将其拆开三个字段则满足第一范式，否则不满足)。 2-NF 第二范式首先满足第一范式，每一列（除主键）都完全依赖与主键。（使用联合主键，某一列仅对联合主键的其中部分主键构成依赖，则不满足第二范式） ####3-NF 第三范式 首次满足第二范式，除主键外其特列不能有传递依赖关系（即除主键外其它列不对任一列构成依赖关系） 创建数据表 1234567891011121314151617181920212223242526272829303132333435create table user( ID int(11), name varchar(20), sex char(1), birth DATE); -- 创建数据库表并指明列名与数据大小create table user( ID int(11) not null COMMENT &quot;主键&quot;， -- 不可为空，备注主键 name varchar(20) null COMMENT &quot;姓名&quot;, -- 可为空，备注姓名 sex char(1) not null COMMENT &quot;性别&quot;， -- 不可为空，备注性别 birth DATE COMMENT &quot;生日&quot;, -- 默认可为空，备注生日 PRIMARY KEY(ID) -- 设置ID为主键);-- 修改字段属性(添加自增约束)ALTER TABLE user MODIFY COLUMN ID int(10) NOT NULL AUTO_INCREMENT COMMENT &apos;主键&apos;；-- 删除主键约束ALTER TABLE user DROP PRIMARY KEY;-- 查看表字段信息DESCRIBE user;(简写：DESC user;)-- 添加唯一约束ALTER TABLE user ADD UNIQUE(id);//创建表时添加参考主键；-- 删除唯一约束ALTER TABLE user DROP INDEX id;-- 修改默认约束ALTER TABLE user MODIFY COLUMN sex char(1) default &apos;M&apos; not null;-- 添加列ALTER TABLE user ADD COLUMN test varchar(20);-- 删除列ALTER TABLE user DROP COLUMN test;-- 外键(外键所链接的列必须为主键)create table u_order(id int(11), W_id int(11),foreign key(w_id) references user(id));-- 数据类型int(11) -- 表示占用一个int（4字节）,显示长度10位，头默认填充0，超过会截断 插入数据 12345-- 插入一条数据INSERT INTO user (id,name,sex,birth) value (&apos;1&apos;,&apos;test&apos;,&apos;M&apos;,now());-- 插入多条数据INSERT INTO user (id,name,sex,birth) value (&apos;2&apos;,&apos;test2&apos;,&apos;S&apos;,now()),(&apos;3&apos;,&apos;test3&apos;,&apos;M&apos;,now()); 修改数据1UPDATE user SET id=1 WHERE id=2; 删除数据1DELETE FROM user WHERE id=1;-- 删除user表id为1的数据 查询123456789101112-- 连表查询select * from user,u_order where user.id=U_order.W_id;-- 子查询select * from user where id in (select W_id from u_order);-- 求并集(列数应该相同)select id from user union select id from u_order;-- 查询结果排序(desc:倒序)select id from user order by id desc;-- 查询指定区间的数据select * from user limit start,length;-- 分组聚合查询select count(number) from user group by name; 事务事务是最小的不可分割的工作单元,事务能保证一个业务的完整性。 事务的特征ACID： A:atomicity:原子性:事务是最小执行单位，不可分割 C:consistency: 一致性:事务要求，同一事务中SQL语句，必须同时成功或者失败。 I:isolation: 隔离性:事务1和事务2之间具有隔离性。 D:durability:持久性:事务一旦结束不可以回滚 //关闭mysql自动提交 12345678set autocommit=0;-- 手动提交事务commit；-- 手动回滚rollback；-- 手动开启事务begin;start transaction; 事务隔离级别： read uncommitted; 读未提交的 不加锁一般不用 read committed; 读已提交的 读不加锁，添加、修改、删除需要加锁 repeatable read; 可重复读 MySQL通过版本控制（MVCC）实现读不加锁，不通过MVCC实现需要加读锁 serializanle 串行化 所有读写均加锁 查看数据库隔离级别 12345678910111213141516-- 查看数据库全局隔离级别select @@global.transaction_isolation;select @@global.tx_isolation; -- mariadb或mysql5.*-- 查看数据会话级隔离级别select @@transaction_isolation;select @@tx_isolation; -- mariadb或mysql5.*-- 修改数据库隔离级别set global transaction isolation level read uncommitted;-- 全局set transaction isolation level read uncommitted; -- 会话级别-- 读未提交，可能由于事务回滚造成脏读set global transaction isolation level read committed;-- 读已提交，可能不可重复读（另一事务修改数据之后，另一事务内多次读同一表数据的值不同）set global transaction isolation level repeatable read;-- 重复读，可能发生幻读（另一事务提交的数据，不能在事务结束前被其它事务获取）set global transaction isolation level serializable;-- 串行化 ，另一操作该表的事务阻塞，可能死锁（mysql自带死锁检查）； 索引12//创建索引 索引名前缀 idx_create index idx_user_name on user(name);","link":"/hexo/2019/10/01/mysql基础/"},{"title":"java线程池简单实现","text":"线程池代码实现​ 单纯练习Java并发编程，还没看完线程池实现的源代码，自己写的，如有错误希望指正，尽可能在保证线程安全的情况下，使用非锁实现。可能存在效率等问题，仅供学习参考。 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126import java.util.concurrent.ArrayBlockingQueue;import java.util.concurrent.BlockingQueue;import java.util.concurrent.atomic.AtomicInteger;public class ThreadPoolDemo implements Runnable { //初始化大小 private int init; //当前线程数量 private AtomicInteger count ; //工作线程数量 private AtomicInteger workQuantity = new AtomicInteger(0); //等待线程数量 private AtomicInteger waitQuantity = new AtomicInteger(0); //最大线程数 private int max; //线程存活时间(单位毫秒) private long mills = 60*1000; //状态位，线程池停止状态 private volatile boolean status ; private BlockingQueue&lt;Runnable&gt; queue ; /** * * @param init 最大线程池数量 * @param max 最大等待队列长度 */ public ThreadPoolDemo(int init,int max){ this.init = init; this.max = max; count= new AtomicInteger(0); queue = new ArrayBlockingQueue&lt;&gt;(max); status = true; } /** * * @param runnable 将要执行的任务 * @return 提交任务是否成功 */ public boolean submit(Runnable runnable) { boolean offerStatus = false; synchronized (this){ offerStatus = queue.offer(runnable); if(waitQuantity.get()==0&amp;&amp;workQuantity.get()&lt;init){ //工作线程+1 workQuantity.getAndAdd(1); new Thread(this).start(); } } synchronized (queue){ queue.notify(); } return offerStatus; } /** * * @return返回当前状态工作线程数量 */ public int getCurrentWorkThreadQuantity(){ return workQuantity.get(); } /** * * @return返回当前状态下等待态线程数量 */ public int getCurrentWaitQuantity(){ return waitQuantity.get(); } /** * * @return阻塞队列中等待的任务数量 */ public int getRemaining(){ return queue.size(); } /** * 等待正在执行的任务结束，关闭线程池 */ public void shutdown(){ //清空队列 status = false; queue.clear(); synchronized(queue){ queue.notifyAll(); } } @Override public void run(){ while(true){ Runnable work = null; synchronized(queue){ //计算超时时间 long future = System.currentTimeMillis() + mills; while (queue.isEmpty()){ try { //判断是否超时 if(!status||(future - System.currentTimeMillis())&lt;0){ //工作线程-1 workQuantity.getAndDecrement(); return; } //等待线程+1 waitQuantity.getAndAdd(1); queue.wait(mills); //等待线程-1 waitQuantity.getAndAdd(-1); } catch (InterruptedException e) { e.printStackTrace(); } } work = queue.poll(); } if(work!=null){ work.run(); } } }} 测试代码1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071package com.cx.demo1;/** * @ClassName: com.cx.demo1 * @description: 线程池测试类 * @team:zua * @author: cx * @createdatatime: 2019-10-06 19:40 **/public class TestThreadPool { public static void main(String[] args) { Calculation calculation = new Calculation(); ThreadPoolDemo threadPoolDemo = new ThreadPoolDemo(4,20); for(int i = 0 ;i &lt; 2 ;i++){ threadPoolDemo.submit(calculation); } try { Thread.sleep(1*1000); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(\"init+++++\"); System.out.println(\"worker :\"+ threadPoolDemo.getCurrentWorkThreadQuantity()); System.out.println(\"waiter :\"+threadPoolDemo.getCurrentWaitQuantity()); for(int i = 0 ;i &lt; 4 ;i++){ threadPoolDemo.submit(calculation); } try { Thread.sleep(1*1000); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(\"++++9++run\"); System.out.println(\"worker :\"+threadPoolDemo.getCurrentWorkThreadQuantity()); System.out.println(\"waiter :\"+threadPoolDemo.getCurrentWaitQuantity()); try { Thread.sleep(50*1000); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(\"sleep++++\"); System.out.println(\"worker :\"+threadPoolDemo.getCurrentWorkThreadQuantity()); System.out.println(\"waiter :\"+threadPoolDemo.getCurrentWaitQuantity()); for(int i = 0 ;i &lt; 50 ;i++){ String submitStatus = threadPoolDemo.submit(calculation)?\"success\":\"failure\"; System.out.println(submitStatus); } System.out.println(\"shutdown ++++++before\"); System.out.println(\"worker :\"+threadPoolDemo.getCurrentWorkThreadQuantity()); System.out.println(\"waiter :\"+threadPoolDemo.getCurrentWaitQuantity()); threadPoolDemo.shutdown(); try { Thread.sleep(10*1000); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(\"shutdown +++++ after\"); System.out.println(\"worker :\"+threadPoolDemo.getCurrentWorkThreadQuantity()); System.out.println(\"waiter :\"+threadPoolDemo.getCurrentWaitQuantity()); }}class Calculation implements Runnable{ @Override public void run() { try { Thread.sleep(10*1000); } catch (InterruptedException e) { e.printStackTrace(); } }} 期望效果​ 当任务数量小于线程池最大数量时，为每个任务创建线程，任务完成后等待60秒，无新的任务则释放线程， 当任务数量大于最大线程数量时，将任务加入阻塞队列，阻塞队列满后拒绝新的任务。工作线程完成任务后，去阻塞队列取新的任务执行。","link":"/hexo/2019/10/06/java线程池简单实现/"},{"title":"ORACLE基础练习","text":"1. 用户管理12345678910111213141516171819202122232425262728293031323334//创建用户SQL&gt; create user test identified by test;用户已创建。//查看当前用户SQL&gt; show user;USER 为 \"SYSTEM\"//修改用户密码SQL&gt; password test更改 test 的口令新口令:重新键入新口令:口令已更改//删除用户SQL&gt; drop user test;用户已删除。//用户授权(系统权限)SQL&gt; grant connect to test;授权成功。//对象权限SQL&gt; grant select on ry.sys_user to test;授权成功。//收回用户权限SQL&gt; revoke select on ry.sys_user from test;撤销成功。//可传递用户权限SQL&gt; grant select on ry.sys_user to test with grant option;授权成功。 2. 数据库表操作123456789101112131415161718192021222324252627282930313233343536373839404142434445//创建表SQL&gt; create table ry.test(name varchar2(20), 2 age number(4), 3 id number(18));表已创建。//表添加字段SQL&gt; alter table ry.test add (test varchar2(20));表已更改。//查看表结构SQL&gt; desc ry.test; 名称 是否为空? 类型 ----------------------------------------- -------- ---------------------------- NAME VARCHAR2(20) AGE NUMBER(4) ID NUMBER(18) TEST VARCHAR2(20) //修改表结构SQL&gt; alter table ry.test modify (test varchar2(10));表已更改。SQL&gt; desc ry.test; 名称 是否为空? 类型 ----------------------------------------- -------- ---------------------------- NAME VARCHAR2(20) AGE NUMBER(4) ID NUMBER(18) TEST VARCHAR2(10)//删除字段名SQL&gt; alter table ry.test drop column test;表已更改。SQL&gt; desc ry.test; 名称 是否为空? 类型 ----------------------------------------- -------- ---------------------------- NAME VARCHAR2(20) AGE NUMBER(4) ID NUMBER(18)//删除表SQL&gt; drop table ry.test; 3. CRUD未完待续","link":"/hexo/2019/10/19/ORACLE基础练习/"},{"title":"mysql查询应用","text":"mysql分组查询一列中最大元素的行1234567891011121314151617181920212223242526272829303132333435//创建数据库表CREATE TABLE `teacher_course` ( `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &apos;主键&apos;, `name` varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL COMMENT &apos;姓名&apos;, `quantity` int(1) NULL DEFAULT NULL COMMENT &apos;选课人数&apos;, `course_id` int(11) NULL DEFAULT NULL COMMENT &apos;课程主键&apos;, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB AUTO_INCREMENT = 7 CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;CREATE TABLE `course` ( `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &apos;主键&apos;, `name` varchar(50) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL COMMENT &apos;课程名&apos;, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;//填充数据INSERT INTO `teacher_course` VALUES (1, &apos;张三&apos;, 50, 1);INSERT INTO `teacher_course` VALUES (2, &apos;李四&apos;, 60, 2);INSERT INTO `teacher_course` VALUES (3, &apos;王五&apos;, 55, 1);INSERT INTO `teacher_course` VALUES (4, &apos;赵六&apos;, 70, 2);INSERT INTO `teacher_course` VALUES (5, &apos;测试&apos;, 61, 2);INSERT INTO `teacher_course` VALUES (6, &apos;王五2&apos;, 55, 1);INSERT INTO `course` VALUES (1, &apos;数据结构&apos;);INSERT INTO `course` VALUES (2, &apos;组成原理&apos;);INSERT INTO `course` VALUES (3, &apos;操作系统&apos;);INSERT INTO `course` VALUES (4, &apos;网络原理&apos;);//全部信息数据SELECT t.`name` AS NAME, t.quantity AS quantity, c.`name` AS course FROM teacher_course AS t JOIN course AS c ON t.course_id = c.id; 表格效果 姓名 选择人数 课程名 张三 50 数据结构 李四 60 组成原理 王五 55 数据结构 赵六 70 组成原理 测试 61 组成原理 王五2 55 数据结构 12345678910//目的选择出所有个课程选课人数最多的老师SELECT t.`name` AS NAME, t.quantity AS quantity, c.`name` AS course FROM teacher_course AS t JOIN course AS c ON t.course_id = c.id JOIN ( SELECT MAX( teacher_course.quantity ) AS quantity, teacher_course.course_id FROM teacher_course GROUP BY teacher_course.course_id ) AS s ON s.course_id = t.course_id AND s.quantity = t.quantity; 最终效果 姓名 选课人数 课程名 王五 55 数据结构 赵六 70 组成原理 王五2 55 数据结构","link":"/hexo/2019/10/09/mysql查询应用/"}],"tags":[{"name":"Linux","slug":"Linux","link":"/hexo/tags/Linux/"},{"name":"Centos8","slug":"Centos8","link":"/hexo/tags/Centos8/"},{"name":"yum","slug":"yum","link":"/hexo/tags/yum/"},{"name":"本地源","slug":"本地源","link":"/hexo/tags/本地源/"},{"name":"服务器","slug":"服务器","link":"/hexo/tags/服务器/"},{"name":"数据库","slug":"数据库","link":"/hexo/tags/数据库/"},{"name":"oracle","slug":"oracle","link":"/hexo/tags/oracle/"},{"name":"oracle12c","slug":"oracle12c","link":"/hexo/tags/oracle12c/"},{"name":"mysql","slug":"mysql","link":"/hexo/tags/mysql/"},{"name":"mariadb","slug":"mariadb","link":"/hexo/tags/mariadb/"},{"name":"基础","slug":"基础","link":"/hexo/tags/基础/"},{"name":"增删改查","slug":"增删改查","link":"/hexo/tags/增删改查/"},{"name":"用户管理","slug":"用户管理","link":"/hexo/tags/用户管理/"},{"name":"事务","slug":"事务","link":"/hexo/tags/事务/"},{"name":"索引","slug":"索引","link":"/hexo/tags/索引/"},{"name":"Java SE","slug":"Java-SE","link":"/hexo/tags/Java-SE/"},{"name":"console","slug":"console","link":"/hexo/tags/console/"},{"name":"线程池","slug":"线程池","link":"/hexo/tags/线程池/"},{"name":"并发编程","slug":"并发编程","link":"/hexo/tags/并发编程/"},{"name":"锁","slug":"锁","link":"/hexo/tags/锁/"},{"name":"线程同步","slug":"线程同步","link":"/hexo/tags/线程同步/"},{"name":"线程线程池","slug":"线程线程池","link":"/hexo/tags/线程线程池/"},{"name":"ORACLE","slug":"ORACLE","link":"/hexo/tags/ORACLE/"},{"name":"ORACLE11G","slug":"ORACLE11G","link":"/hexo/tags/ORACLE11G/"},{"name":"查询","slug":"查询","link":"/hexo/tags/查询/"},{"name":"子查询","slug":"子查询","link":"/hexo/tags/子查询/"},{"name":"分组聚合查询","slug":"分组聚合查询","link":"/hexo/tags/分组聚合查询/"}],"categories":[{"name":"Linux","slug":"Linux","link":"/hexo/categories/Linux/"},{"name":"MYsql","slug":"MYsql","link":"/hexo/categories/MYsql/"},{"name":"Centos8","slug":"Linux/Centos8","link":"/hexo/categories/Linux/Centos8/"},{"name":"Java","slug":"Java","link":"/hexo/categories/Java/"},{"name":"ORACLE","slug":"ORACLE","link":"/hexo/categories/ORACLE/"},{"name":"oracle","slug":"Linux/Centos8/oracle","link":"/hexo/categories/Linux/Centos8/oracle/"}]}